<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QParadox • Big Bang Nucleosynthesis</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet"/>

<!-- MathJax -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<style>
:root{
  --bg:#0b0b0d; --panel:#131316; --ink:#efeae2; --ink2:#d8d1c8; --muted:#b9b3aa;
  --gold:#caa36b; --blue:#7aa0ff; --line:rgba(255,255,255,.14); --glass:rgba(255,255,255,.06);
  --shadow:0 18px 60px rgba(0,0,0,.72), inset 0 0 120px rgba(255,255,255,.03);
  --radius:18px; --side:330px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--ink);
  font-family:"Crimson Text",serif; line-height:1.95; letter-spacing:.15px; overflow-x:hidden;
}
body::before{content:""; position:fixed; inset:0; z-index:-3; opacity:.06;
  background:url('https://www.transparenttextures.com/patterns/asfalt-dark.png')}
body::after{content:""; position:fixed; inset:0; z-index:-2; pointer-events:none;
  background:
    radial-gradient(900px 520px at 12% 0%, rgba(255,222,180,.09), transparent 60%),
    radial-gradient(900px 520px at 88% 12%, rgba(140,160,255,.06), transparent 60%),
    radial-gradient(1000px 620px at 50% 100%, rgba(202,163,107,.07), transparent 70%)}

.frame{position:fixed; inset:18px; border:1px solid var(--line); border-radius:22px; pointer-events:none; box-shadow:inset 0 0 140px rgba(0,0,0,.45)}
#progress{position:fixed; top:0; left:0; height:4px; width:0; z-index:100; background:linear-gradient(90deg,var(--gold),var(--blue)); box-shadow:0 0 10px rgba(202,163,107,.6)}

header{padding:6.2rem 1.2rem 2.4rem; text-align:center}
h1{font-family:"Playfair Display",serif; font-weight:900; margin:0;
  font-size:clamp(2.6rem,4vw,4.8rem); line-height:1.1; color:#f5ead8; text-shadow:0 0 22px rgba(255,255,255,.12)}
.subtitle{max-width:980px; margin:1rem auto 0; color:var(--ink2); font-size:clamp(1.05rem,1.2vw,1.2rem)}

.main{width:min(1200px,94%); margin:0 auto 4rem; display:grid; grid-template-columns:1fr; gap:26px}
@media(min-width:1120px){ .main{grid-template-columns:minmax(0, 1fr) var(--side)} }

article{
  background:linear-gradient(180deg,rgba(255,255,255,.055),rgba(255,255,255,.03));
  border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:2.2rem 1.2rem
}
@media(min-width:780px){ article{padding:2.6rem 2.2rem} }
article h2{font-family:"Playfair Display",serif; margin:2rem 0 1rem; font-size:clamp(1.85rem,2.6vw,2.5rem); color:#f6eddc}
.divider{height:1px; background:linear-gradient(90deg,transparent,var(--line),transparent); margin:1.2rem 0}
p{margin:1.05rem 0; text-align:justify}
.dropcap:first-letter{float:left; font-family:"Playfair Display",serif; font-size:3.2rem; line-height:2.3rem; padding:.25rem .5rem .2rem 0; color:#f3e4c5}

.figure{margin:1.5rem auto; border:1px solid var(--line); border-radius:14px; overflow:hidden; background:#0e0f12; box-shadow:var(--shadow); max-width:820px}
.figure img{display:block; width:100%; height:auto}
.figcap{padding:.7rem .9rem; color:var(--ink2); font-size:.95rem; border-top:1px solid var(--line)}

.pwrap{position:relative; padding-right:2.5rem}
.hlbtn{position:absolute; right:.2rem; top:.35rem; padding:.25rem .6rem; border-radius:.6rem;
  background:var(--glass); color:var(--ink); border:1px solid var(--line);
  font-size:.85rem; cursor:pointer; opacity:0; transition:.2s}
.pwrap:hover .hlbtn{opacity:1}
.mark{background:linear-gradient(180deg, rgba(202,163,107,.3), rgba(122,160,255,.24)); border-radius:.2rem; padding:.05rem .12rem}

aside{position:sticky; top:90px; align-self:start; height:fit-content;
  background:linear-gradient(180deg,rgba(255,255,255,.055),rgba(255,255,255,.03));
  border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); padding:1rem .9rem}
aside h3{margin:.2rem 0 .7rem; font-family:"Playfair Display",serif}
.toc a{display:block; text-decoration:none; color:var(--ink2); padding:.35rem .2rem; border-radius:.4rem; font-size:.95rem}
.toc a:hover{color:var(--ink)}
.toc a.active{color:#111; background:linear-gradient(90deg,var(--gold),#efd6a8)}
hr.sep{border:0; height:1px; background:linear-gradient(90deg,transparent,var(--line),transparent); margin:1rem 0}
.note{border:1px solid var(--line); border-radius:12px; padding:.7rem .75rem; margin:.5rem 0; background:rgba(255,255,255,.05)}
.note time{display:block; color:var(--muted); font-size:.85rem}
.note .del{margin-top:.4rem; padding:.25rem .55rem; border-radius:.5rem; border:1px solid var(--line); background:var(--glass); color:var(--ink); cursor:pointer}

.quiz{margin-top:1.6rem; padding:1rem; border:1px solid var(--line); border-radius:14px; background:rgba(255,255,255,.04)}
.qitem{margin:1rem 0; padding:.8rem; border-radius:10px; border:1px solid rgba(255,255,255,.12)}
.qitem h4{margin:0 0 .5rem 0; font-family:"Playfair Display",serif}
.qchoices{display:grid; gap:.45rem}
.qchoices button{text-align:left; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.05);
  color:var(--ink); padding:.55rem .7rem; border-radius:.6rem; cursor:pointer}
.qchoices button.correct{border-color:#46d17d}
.qchoices button.wrong{border-color:#e07070}
.qfeedback{color:var(--ink2); margin-top:.4rem; font-size:.98rem}

.nextrow{display:flex; gap:.6rem; flex-wrap:wrap; margin-top:1.3rem}
.nextrow a{text-decoration:none; color:var(--ink); border:1px solid rgba(255,255,255,.26); border-radius:.8rem;
  background:linear-gradient(90deg,rgba(202,163,107,.28),rgba(122,160,255,.22)); padding:.7rem 1rem}

.reveal{opacity:0; transform:translateY(24px); transition:opacity .9s, transform .9s}
.reveal.in{opacity:1; transform:none}
footer{padding:2rem 1rem; text-align:center; color:var(--muted); border-top:1px solid var(--line)}
</style>
</head>
<body>

<div class="frame"></div>
<div id="progress"></div>

<header class="reveal in">
  <h1>Big Bang Nucleosynthesis</h1>
  <p class="subtitle">The forging of the first nuclei — how a hot, expanding Universe assembled the light elements in the first minutes after time began.</p>
</header>

<div class="main">
  <!-- ARTICLE -->
  <article id="article">

    <figure class="figure reveal">
      <img src="bbn-header.jpeg" alt="Early-universe nucleosynthesis illustration"/>
      <figcaption class="figcap">In the cosmic furnace of the first minutes, protons and neutrons combined into the first light nuclei — hydrogen, helium, and trace isotopes that set the initial chemical landscape.</figcaption>
    </figure>

    <h2 id="intro" class="reveal">Introduction — What BBN Is and Why It Matters</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p1">★ Highlight</button>
      <p id="p1" class="dropcap">
        Big Bang Nucleosynthesis (BBN) is the theory that describes the formation of the Universe's first atomic nuclei during the first few minutes after the Big Bang. In that brief epoch, the cosmos was hot, dense, and suffused with a plasma of protons, neutrons, electrons, photons, and neutrinos. As the Universe expanded and cooled, nuclear reactions became energetically favorable: free nucleons combined to form deuterium (\(^2\)H), which served as the gateway to helium-3 (\(^3\)He), helium-4 (\(^4\)He), and trace quantities of lithium-7 (\(^7\)Li). BBN sets the primordial abundances of light elements, providing one of cosmology’s most important pillars — a direct link between microphysics and the large-scale universe we see today.
      </p>
    </div>

    <h2 id="nuclear-basics" class="reveal">Nuclear and Particle Ingredients</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p2">★ Highlight</button>
      <p id="p2">
        The core actors of BBN are deceptively simple: protons (p), neutrons (n), photons (γ), electrons (e⁻), positrons (e⁺), and neutrinos (ν). But their interactions are governed by quantum electrodynamics, weak interactions, and nuclear forces. The neutron–proton ratio, set by the weak interaction freeze-out and neutron decay, is the most crucial microphysical parameter: it largely determines how much \(^4\)He the Universe will produce. Nuclear cross sections — the probability that two nuclei will fuse under given conditions — shape the reaction network, while the Hubble expansion rate sets the clock that determines how long reactions had to operate.
      </p>
    </div>

    <h2 id="timeline" class="reveal">A Chronology: Minutes That Shaped Chemistry</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p3">★ Highlight</button>
      <p id="p3">
        The BBN era unfolds across a slender timeline measured in seconds to minutes. At \(t\sim1\) second and \(T\sim10^{10}\) K, weak interactions freeze out, fixing approximately the neutron-to-proton ratio (modulated subsequently by neutron decay). By \(t\sim100\) seconds and \(T\sim10^9\) K, deuterium can survive photodissociation — the so-called deuterium bottleneck opens — and rapid nucleosynthesis proceeds. Between roughly 100 and 1000 seconds, the light elements are synthesized and then the thermal bath dilutes to the point where further fusion becomes improbable. After a few tens of minutes the Universe is essentially finished with BBN; heavier elements await the crucibles of stars.
      </p>
    </div>

    <figure class="figure reveal">
      <img src="bbn-timeline.jpeg" alt="BBN timeline schematic"/>
      <figcaption class="figcap">A compressed clock: from weak freeze-out to the closing of the deuterium bottleneck — BBN completes within minutes.</figcaption>
    </figure>

    <h2 id="reaction-network" class="reveal">The Reaction Network and Key Pathways</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p4">★ Highlight</button>
      <p id="p4">
        The nuclear reaction network in BBN is a compact yet intricate web. It begins with \(n \leftrightarrow p\) conversions and proceeds through \(p(n,\gamma){^2\text{H}}\) producing deuterium. From deuterium, two-body reactions form \(^3\)H and \(^3\)He, and then \(^4\)He via \( \, ^3\text{H}(p,\gamma) \,^4\text{He}\) or \( \, ^3\text{He}(n,\gamma) \,^4\text{He}\). Trace channels produce \(^7\)Li and \(^7\)Be through sequences like \(^3\text{He}(\alpha,\gamma)\,^7\text{Be}\) (with \(^7\)Be later decaying to \(^7\)Li). Reaction rates depend sensitively on temperature and the Coulomb barriers of participating nuclei; small differences in cross sections can shift predicted abundances measurably.
      </p>
    </div>

    <h2 id="predicted-abundances" class="reveal">Predicted Abundances: Numbers from First Principles</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p5">★ Highlight</button>
      <p id="p5">
        Modern BBN calculations, which integrate nuclear kinetics against an expanding Friedmann background, produce precise predictions for the primordial mass fraction of \(^4\)He (denoted \(Y_p\)) and the number ratios for deuterium and lithium relative to hydrogen (D/H and \(^7\)Li/H). For the baryon density now well measured by CMB observations, the expected values are \(Y_p\approx0.247\!-\!0.252\), \( \text{D/H}\sim 2.5\times10^{-5}\), and \(^7\)Li/H of order \(10^{-10}\). The remarkable success of BBN comes from the concordance between theory and observed deuterium and helium abundances — a triumph that ties together particle physics, nuclear experiment, and astronomical observation.
      </p>
    </div>

    <h2 id="observations" class="reveal">Observational Tests: From Quasars to H II Regions</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p6">★ Highlight</button>
      <p id="p6">
        Observational cosmology measures primordial abundances in environments chosen to minimize later astrophysical processing. Deuterium is measured in high-redshift quasar absorption systems: cold, nearly pristine clouds between us and a quasar imprint Lyman-series absorption that reveals D/H with exquisite precision. Helium-4 is constrained in metal-poor extragalactic H II regions; by extrapolating helium measurements to zero metallicity, astronomers estimate \(Y_p\). Lithium is measured in old, warm halo stars where surface depletion complicates interpretation. Together these measurements test BBN and, by extension, the baryon density and physics of the early Universe.
      </p>
    </div>

    <figure class="figure reveal">
      <img src="bbn-observations.jpeg" alt="Spectra showing deuterium absorption"/>
      <figcaption class="figcap">Spectroscopic windows into primordial chemistry: deuterium lines in quasar absorbers provide a direct probe of early nucleosynthesis.</figcaption>
    </figure>

    <h2 id="sensitivity" class="reveal">Dependence on Cosmological Parameters</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p7">★ Highlight</button>
      <p id="p7">
        BBN is not an isolated microphysics exercise — it depends on cosmology. The predicted abundances are sensitive to the baryon-to-photon ratio \(\eta\), the expansion rate (which can be influenced by additional relativistic species often parameterized as \(N_{\rm eff}\)), and the neutron lifetime. For example, raising \(\eta\) increases helium production and reduces deuterium because more baryons favour fusion to heavier nuclei. Similarly, additional relativistic degrees of freedom (extra neutrino-like particles) speed up expansion, trapping a larger neutron fraction and raising \(Y_p\). Thus BBN serves as a laboratory for physics beyond the Standard Model, constraining sterile neutrinos, decaying particles, and exotic early-Universe scenarios.
      </p>
    </div>

    <h2 id="lithium-problem" class="reveal">Open Problems: The Lithium Tension</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p8">★ Highlight</button>
      <p id="p8">
        While deuterium and helium largely agree with predictions, lithium stands apart. The standard BBN prediction for \(^7\)Li/H exceeds the abundances observed in old metal-poor stars by a factor of ~3 — a discrepancy called the cosmological lithium problem. Proposed resolutions range from stellar astrophysics (surface depletion, diffusion) to nuclear physics (re-evaluating reaction rates) and to exotic new physics (particle decay altering neutron-proton balance). The lithium problem remains an active research frontier because it is the largest clear mismatch between BBN theory and observation, and its resolution may teach us something fundamental about stars or the early Universe.
      </p>
    </div>

    <h2 id="precision-era" class="reveal">BBN in the Precision Era</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p9">★ Highlight</button>
      <p id="p9">
        The arrival of precision cosmology — notably high-resolution CMB measurements from WMAP and Planck — transformed BBN from a parameter-constraining tool into a cross-check of cosmology. The CMB determines the baryon density \(\Omega_b h^2\) with percent-level accuracy; feeding that value into BBN codes yields predicted deuterium and helium abundances that can be compared with astrophysical determinations. This concordance elegantly ties the physics of minutes after the Big Bang to observations 380,000 years later (CMB) and to the present-day Universe.
      </p>
    </div>

    <h2 id="implications" class="reveal">Implications for Particle Physics and Cosmology</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p10">★ Highlight</button>
      <p id="p10">
        Because BBN is sensitive to relativistic energy density and weak interaction rates, it constrains light degrees of freedom (e.g., extra neutrino species), lepton asymmetry, and scenarios with decaying or annihilating particles. Limits on \(N_{\rm eff}\) derived from BBN and the CMB bound many models of dark radiation. Similarly, any proposed extension to the Standard Model must respect primordial abundance constraints. BBN thus remains a powerful, complementary probe of new physics, bridging nuclear experiment, particle theory, and early-Universe cosmology.
      </p>
    </div>

    <h2 id="conclusion" class="reveal">Conclusion — The First Chemistry of the Cosmos</h2>
    <div class="divider"></div>

    <div class="pwrap reveal">
      <button class="hlbtn" data-target="p11">★ Highlight</button>
      <p id="p11">
        Big Bang Nucleosynthesis is a story of emergence: simple constituents and basic interactions, under the governance of expansion and cooling, produced the first chemical diversity of the cosmos. From the abundance of helium that sets the thermodynamic baseline of stars to the trace isotopes that foreshadow stellar nucleosynthesis, the light elements narrate the infancy of everything that followed. Where agreement is strong, it confirms the hot Big Bang and the remarkable predictiveness of physical law; where disagreement persists, like the lithium problem, it points to secrets yet to be deciphered. BBN remains both a monument to human understanding and a living laboratory for future discovery.
      </p>
    </div>

    <figure class="figure reveal">
      <img src="bbn-chart.jpeg" alt="Predicted vs observed abundances"/>
      <figcaption class="figcap">Predicted primordial abundances compared with modern observational determinations — concordance that anchors cosmology.</figcaption>
    </figure>

    <h2 id="quiz" class="reveal">Quick Quiz – Big Bang Nucleosynthesis</h2>
    <div class="divider"></div>

    <section class="quiz reveal" id="quizSection">
      <div class="qitem">
        <h4>1) What is the deuterium 'bottleneck'?</h4>
        <div class="qchoices" data-answer="c" data-explain="The deuterium bottleneck refers to the early period when high-energy photons destroyed deuterium as quickly as it formed; only after the Universe cooled could deuterium survive and enable further nucleosynthesis.">
          <button data-choice="a">A process where deuterium is produced abundantly by stars.</button>
          <button data-choice="b">The trapping of deuterium in dust grains in galaxies.</button>
          <button data-choice="c">The early phase when photodissociation prevented deuterium from surviving until the Universe cooled sufficiently.</button>
        </div>
        <div class="qfeedback"></div>
      </div>
      <div class="qitem">
        <h4>2) Which abundance is most sensitive to the baryon-to-photon ratio \(\eta\)?</h4>
        <div class="qchoices" data-answer="a" data-explain="Deuterium is highly sensitive to \(\eta\); its observed abundance is a precise baryometer of the early Universe.">
          <button data-choice="a">Deuterium (D/H)</button>
          <button data-choice="b">Helium-4 mass fraction \(Y_p\)</button>
          <button data-choice="c">Iron abundance</button>
        </div>
        <div class="qfeedback"></div>
      </div>
      <div class="qitem">
        <h4>3) What is the 'lithium problem'?</h4>
        <div class="qchoices" data-answer="b" data-explain="The lithium problem is the mismatch where standard BBN predicts more \(^7\)Li than is observed in old, metal-poor stars by a factor of a few.">
          <button data-choice="a">The absence of lithium production during BBN.</button>
          <button data-choice="b">The discrepancy between predicted and observed primordial \(^7\)Li abundances.</button>
          <button data-choice="c">Lithium formation in the cosmic microwave background.</button>
        </div>
        <div class="qfeedback"></div>
      </div>
    </section>

    <div class="nextrow reveal">
      <a href="cosmic-microwave-background.html">← Back to Cosmic Microwave Background</a>
      <a href="beyond-the-textbook.html">Next page → Beyond the Textbook</a>
    </div>

  </article>

  <!-- SIDEBAR -->
  <aside class="reveal">
    <h3>Contents</h3>
    <div id="toc" class="toc"></div>
    <hr class="sep"/>
    <h3>Notebook</h3>
    <p style="color:var(--ink2); margin:.1rem 0 .6rem">Click ★ to save paragraphs here. You can also write your own notes below.</p>
    <div id="nbList"></div>
    <textarea id="freeNote" placeholder="Write your own note..." style="margin-top:.6rem; height:100px; background:rgba(255,255,255,.05); border:1px solid var(--line); color:var(--ink); border-radius:.5rem; padding:.55rem .6rem; font-family:'Crimson Text',serif;"></textarea>
    <div style="display:flex; gap:.5rem; margin-top:.4rem">
      <button id="saveFree" style="padding:.45rem .7rem; border-radius:.6rem; border:1px solid var(--line); background:var(--glass); color:var(--ink); cursor:pointer">Save</button>
      <button id="clearAll" style="padding:.45rem .7rem; border-radius:.6rem; border:1px solid var(--line); background:var(--glass); color:var(--ink); cursor:pointer">Clear all</button>
    </div>
    <p style="color:var(--muted); font-size:.9rem; margin-top:.4rem">Notes are stored locally in your browser.</p>
  </aside>
</div>

<footer>© QParadox • Forging the Elements — 2025</footer>

<script>
/* progress bar */
const bar=document.getElementById('progress');
function onScroll(){const h=document.documentElement,st=h.scrollTop||document.body.scrollTop,sh=h.scrollHeight-h.clientHeight;
  bar.style.width=(Math.max(0,Math.min(1,st/sh))*100)+'%';}
addEventListener('scroll',onScroll);onScroll();

/* reveal on scroll */
const obs=new IntersectionObserver(es=>{es.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');obs.unobserve(e.target);}})},{threshold:.18});
document.querySelectorAll('.reveal').forEach(el=>{if(!el.classList.contains('in'))obs.observe(el);});

/* TOC */
const toc=document.getElementById('toc');const heads=[...document.querySelectorAll('#article h2')];
heads.forEach(h=>{const a=document.createElement('a');a.href='#'+h.id;a.textContent=h.textContent;toc.appendChild(a);});
function spy(){const y=scrollY+140;let idx=-1;heads.forEach((s,i)=>{if(s.offsetTop<=y&&s.offsetTop+s.offsetHeight>y)idx=i;});
[...toc.querySelectorAll('a')].forEach((a,i)=>a.classList.toggle('active',i===idx));}
addEventListener('scroll',spy);spy();

/* notebook */
const KEY='qpx_notes_bbn_v1';const listEl=document.getElementById('nbList');
function load(){try{return JSON.parse(localStorage.getItem(KEY)||'[]');}catch(e){return [];} }
function save(data){localStorage.setItem(KEY,JSON.stringify(data));}
function render(){const notes=load();listEl.innerHTML='';
  if(notes.length===0){listEl.innerHTML='<p style="color:var(--muted)">No notes yet.</p>';return;}
  notes.forEach(n=>{const div=document.createElement('div');div.className='note';div.dataset.id=n.id;
    div.innerHTML=`<time>${new Date(n.time).toLocaleString()}</time><p>${n.text}</p><button class="del">Remove</button>`;
    listEl.appendChild(div);});}
render();
document.querySelectorAll('.hlbtn').forEach(btn=>{btn.addEventListener('click',()=>{const id=btn.dataset.target,p=document.getElementById(id);
  if(!p)return;p.classList.add('mark');const notes=load();notes.push({id:'n'+Date.now(),text:p.textContent.trim(),time:Date.now(),para:id});
  save(notes);render();});});
document.getElementById('saveFree').addEventListener('click',()=>{const box=document.getElementById('freeNote');const t=box.value.trim();if(!t)return;
  const notes=load();notes.push({id:'n'+Date.now(),text:t,time:Date.now(),para:null});save(notes);render();box.value='';});
listEl.addEventListener('click',e=>{if(!e.target.classList.contains('del'))return;const item=e.target.closest('.note');const id=item.dataset.id;
  const notes=load().filter(x=>x.id!==id);save(notes);render();});
document.getElementById('clearAll').addEventListener('click',()=>{if(!confirm('Clear all notes?'))return;localStorage.removeItem(KEY);render();
  document.querySelectorAll('.mark').forEach(m=>m.classList.remove('mark'));});

/* quiz logic (allow re-selection; update feedback dynamically) */
document.querySelectorAll('.qchoices').forEach(group=>{
  const explain = group.dataset.explain;
  const feedbackEl = group.parentElement.querySelector('.qfeedback');
  group.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click',()=>{
      // clear previous markers in this group
      group.querySelectorAll('button').forEach(b=>{b.classList.remove('correct','wrong');});
      // mark selection
      const answer = group.dataset.answer;
      if(btn.dataset.choice === answer){
        btn.classList.add('correct');
        feedbackEl.textContent = 'Correct – '+group.dataset.explain;
        feedbackEl.style.color = '#8fe0a8';
      } else {
        btn.classList.add('wrong');
        feedbackEl.textContent = 'Wrong – '+group.dataset.explain;
        feedbackEl.style.color = '#f29b9b';
        // also reveal which is correct visually (but don't prevent changing)
        const correct = group.querySelector(`button[data-choice="${answer}"]`);
        if(correct) correct.classList.add('correct');
      }
    });
  });
});

/* ensure users can toggle and change answers freely (no disabling) */
/* nothing else needed: we intentionally do not disable buttons */

/* end of script */
</script>
</body>
</html>
